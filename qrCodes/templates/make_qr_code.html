{% load static %}
{% load qr_code %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'qrCodes/css/style.css' %}">

</head>

<body>
    <!-- <style>

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
   background: url('../images/garden_image.jpeg') no-repeat center center/cover;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    filter: blur(8px);
    z-index: -1;
}




.qr-overlay {
    width: 100%;
    max-width: 400px;
    background: var(--light-green);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.qr-container h1 {
    font-size: 24px;
    color: var(--dark-green);
    margin-bottom: 10px;
}

.qr-container p {
    font-size: 16px;
    color: var(--black);
    margin-bottom: 15px;
}

#reader {
    width: 100%;
    border: 3px solid var(--eco-green);
    border-radius: 8px;
    padding: 10px;
    background: var(--white);
}

#result {
    font-size: 18px;
    font-weight: bold;
    color: var(--dark-green);
    margin-top: 15px;
}
    </style> -->
    <script>
        function generateQRCode() {
            // Get input value
            const input = document.getElementById('qr-input').value;
            const baseUrl = window.location.origin; // Gets the current domain
            const qrCodeUrl = `${baseUrl}/qrcode/scan_code?id=${encodeURIComponent(input)}`;
            // Clear previous QR code
            document.getElementById('qrcode').innerHTML = '';

            if (input) {
                // Generate new QR code
                new QRCode(document.getElementById('qrcode'), {
                    text: qrCodeUrl,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
            } else {
                alert('Please enter text or URL');
            }
        }
    </script>

{% include "partials/navbar.html" %}
    <style>.navbar{padding:0;}</style>
    <div class = 'qr-container'>
        <h1>Select Fountain</h1>
        <label for="options">Choose an option:</label>
       <select id="qr-input" name="options" onchange="generateQRCode()">
    <option value="" selected disabled hidden>Select a fountain</option>
    {% for fountain in fountains %}
        <option value="{{ fountain.id }}">{{ fountain.name }}</option>
    {% endfor %}
</select>

        <!-- Include QRCode.js library -->
        <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
        <div id="qrcode">

        </div>
    </div>
    

    
</body>
</html>